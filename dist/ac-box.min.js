!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.AcBox=e()}}(function(){return function e(t,n,i){function s(o,a){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n=t[o][1][e];return s(n?n:e)},h,h.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(e,t){for(var n,o,a=i(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var d in n)s.call(n,d)&&(a[d]=n[d]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(n);for(var h=0;h<o.length;h++)r.call(n,o[h])&&(a[o[h]]=n[o[h]])}}return a}},{}],2:[function(e,t,n){"use strict";function i(e,t){this.state={isOpen:null,value:null,focusedIndex:null},this.options=y({menus:[],menuContainerClass:"ac-menu-container",menuClass:"ac-menu",deleterClass:"ac-deleter",expanderClass:"ac-expander"},t),this.dispatcher=new v,this.store=new g(this.dispatcher),this.inputEl=e,this.menuContainerEl=document.createElement("ul"),this.deleterEl=document.createElement("span"),this.expanderEl=document.createElement("span"),this.expanderIconEl=document.createElement("div"),this.menuContainerEl.className=this.options.menuContainerClass,this.deleterEl.className=this.options.deleterClass,this.deleterEl.tabIndex=-1,this.deleterEl.textContent="Ã—",this.expanderEl.className=this.options.expanderClass,this.expanderEl.tabIndex=-1;var n=window.getComputedStyle(this.inputEl),i=this.inputEl.offsetTop,c=this.inputEl.offsetLeft,f=this.inputEl.offsetWidth,E=this.inputEl.offsetHeight;y(this.menuContainerEl.style,{display:"none",position:"absolute",left:c+"px",top:i+E+"px",padding:0,margin:0,width:parseInt(n.width)+parseInt(n.borderLeftWidth)+parseInt(n.borderRightWidth)+"px",maxHeight:window.innerHeight-i-E-12+"px",overflow:"auto",listStyle:"none",boxSizing:"border-box"}),y(this.deleterEl.style,{display:"none",position:"absolute",left:c+f-18+"px",top:i+"px",width:"16px",height:E+"px",fontWeight:"bold",textAlign:"center",lineHeight:E+"px",cursor:"pointer"}),y(this.expanderEl.style,{position:"absolute",left:c+f-18+"px",top:i+"px",width:"16px",height:E+"px",textAlign:"center",cursor:"pointer"}),y(this.expanderIconEl.style,{display:"block",width:0,height:0,margin:(E-4)/2+"px 4px 0 4px",borderLeft:"4px solid transparent",borderTop:"4px solid black",borderBottom:"none",borderRight:"4px solid transparent"}),this.expanderEl.appendChild(this.expanderIconEl),document.body.appendChild(this.menuContainerEl),document.body.appendChild(this.deleterEl),document.body.appendChild(this.expanderEl),this.handlers={},this.handlers.onWindowResize=s.bind(this),window.addEventListener("resize",this.handlers.onWindowResize),this.inputEl.addEventListener("focus",r.bind(this)),this.inputEl.addEventListener("blur",o.bind(this)),this.inputEl.addEventListener("keydown",a.bind(this)),this.inputEl.addEventListener("keyup",l.bind(this)),this.menuContainerEl.addEventListener("click",d.bind(this)),this.deleterEl.addEventListener("click",h.bind(this)),this.expanderEl.addEventListener("click",u.bind(this)),this.store.on("reset",p.bind(this)),this.dispatcher.emit("reset",this.options.menus)}function s(e){var t=window.getComputedStyle(this.inputEl),n=this.inputEl.offsetTop,i=this.inputEl.offsetLeft,s=this.inputEl.offsetWidth,r=this.inputEl.offsetHeight;y(this.menuContainerEl.style,{left:i+"px",top:n+r+"px",width:parseInt(t.width)+parseInt(t.borderLeftWidth)+parseInt(t.borderRightWidth)+"px"}),y(this.deleterEl.style,{left:i+s-18+"px",top:n+"px",height:r+"px"}),y(this.expanderEl.style,{left:i+s-18+"px",top:n+"px",height:r+"px"})}function r(e){var t=e.relatedTarget||e.explicitOriginalTarget;t&&t.parentNode===this.menuContainerEl||(y(this.state,{isOpen:!0}),m.bind(this)())}function o(e){var t=e.relatedTarget||e.explicitOriginalTarget;(!t||t.parentNode!==this.menuContainerEl&&t!==this.deleterEl&&t!==this.expanderEl)&&(y(this.state,{isOpen:!1}),m.bind(this)())}function a(e){switch(e.keyCode){case C.UP:case C.DOWN:for(var t=void 0,n=e.keyCode===C.UP?["previousSibling","lastChild"]:["nextSibling","firstChild"],i=b(n,2),s=i[0],r=i[1],o=this.menuContainerEl.children[this.state.focusedIndex],a=o&&o[s]||this.menuContainerEl[r];a&&"none"===a.style.display;)a=a[s];if(!a)return;t=Array.prototype.indexOf.call(this.menuContainerEl.children,a),y(this.state,{value:a.textContent,focusedIndex:t}),m.bind(this)();break;case C.ENTER:o=this.menuContainerEl.children[this.state.focusedIndex],y(this.state,{isOpen:!1}),m.bind(this)()}}function l(e){var t=this.inputEl.value;this.state.value!==t&&(y(this.state,{isOpen:!0,value:t}),f.bind(this)(),m.bind(this)())}function d(e){var t=e.target.textContent;y(this.state,{isOpen:!1,value:t}),f.bind(this)(),m.bind(this)()}function h(e){y(this.state,{isOpen:this.state.isOpen,value:""}),this.inputEl.focus(),f.bind(this)(),m.bind(this)()}function u(e){y(this.state,{isOpen:!this.state.isOpen}),m.bind(this)()}function p(e){y(this.state,{isOpen:!1,value:"",focusedIndex:null}),c.bind(this)(e)}function c(e){for(var t=this,n=this.menuContainerEl;n.firstChild;)n.removeChild(n.firstChild);var i=e.reduce(function(e,n){var i=document.createElement("li");return i.appendChild(document.createTextNode(n.text)),i.className=t.options.menuClass,i.tabIndex=-1,e.appendChild(i),e},document.createDocumentFragment());this.menuContainerEl.appendChild(i)}function f(){var e=this;this.state.value?Array.prototype.forEach.call(this.menuContainerEl.children,function(t){var n=new RegExp(e.state.value,"ig");n.test(t.textContent)?(E.bind(e)(t,new RegExp(e.state.value,"ig")),t.style.display=""):t.style.display="none"}):Array.prototype.forEach.call(this.menuContainerEl.children,function(e){e.textContent=e.textContent,e.style.display=""})}function E(e,t){for(var n=e.textContent,i=void 0,s=void 0,r="";i=t.exec(n);)r+=n.substring(s,i.index)+"<strong>"+n.substring(i.index,t.lastIndex)+"</strong>",s=t.lastIndex;r+=n.substring(s),e.innerHTML=r}function m(e){if(this.inputEl.value=this.state.value,this.state.isOpen){this.menuContainerEl.style.display="block",this.menuContainerEl.style.maxHeight=window.innerHeight-this.menuContainerEl.offsetTop-12+"px",document.body.style.overflow="hidden";var t=this.menuContainerEl.querySelectorAll(".focused");Array.prototype.forEach.call(t,function(e){e.className=e.className.replace(/ focused\b/,"")});var n=this.menuContainerEl.children[this.state.focusedIndex];n&&(n.className=n.className.replace(/ focused\b/,"")+" focused",document.addEventListener("blur",x,!0),document.addEventListener("focus",x,!0),n.focus(),this.inputEl.focus(),document.removeEventListener("blur",x,!0),document.removeEventListener("focus",x,!0)),y(this.expanderIconEl.style,{borderTop:"none",borderBottom:"4px solid black"})}else this.menuContainerEl.style.display="none",document.body.style.overflow="",y(this.expanderIconEl.style,{borderTop:"4px solid black",borderBottom:"none"});y(this.deleterEl.style,{display:this.state.value?"":"none"}),y(this.expanderEl.style,{display:this.state.value?"none":""})}function x(e){e.stopPropagation()}var b=function(){function e(e,t){var n=[],i=!0,s=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(l){s=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(s)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=e("object-assign"),v=e("./event-emitter"),g=e("./menu-store"),C=e("./keycode");y(i.prototype,{setMenus:function(e){this.dispatcher.emit("reset",e)},destroy:function(){this.inputEl&&this.inputEl.parentNode.appendChild(this.inputEl.cloneNode(!0)),this.handlers&&window.removeEventListener("resize",this.handlers.onWindowResize);for(var e in this)this[e].parentNode&&this[e].parentNode.removeChild(this[e]),delete this[e]}}),t.exports=i},{"./event-emitter":3,"./keycode":4,"./menu-store":5,"object-assign":1}],3:[function(e,t,n){"use strict";function i(){this.handlers={}}var s=e("object-assign");s(i.prototype,{on:function(e,t){Array.isArray(this.handlers[e])||(this.handlers[e]=[]),this.handlers[e].push(t)},emit:function(e,t){Array.isArray(this.handlers[e])&&this.handlers[e].forEach(function(e){return e(t)})}}),t.exports=i},{"object-assign":1}],4:[function(e,t,n){"use strict";t.exports={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,ESC:27,TAB:9}},{}],5:[function(e,t,n){"use strict";function i(e,t){o.call(this),this.dispatcher=e,this.menus=t,this.dispatcher.on("reset",s.bind(this))}function s(e){this.menus=e,this.emit("reset",e)}var r=e("object-assign"),o=e("./event-emitter");r(i.prototype,o.prototype),r(i.prototype,{getAll:function(){return this.menus}}),t.exports=i},{"./event-emitter":3,"object-assign":1}]},{},[2])(2)});